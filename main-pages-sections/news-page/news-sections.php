<?php
    // 1. Get the featured news (always show if exists)
    $featured = new WP_Query(array(
        "post_type"      => "news",
        "posts_per_page" => -1,
        "meta_query"     => array(
            array(
                "key"     => "featured_news",
                "value"   => '1',  //means that the value is true
                "compare" => "="
            )
        )
    ));

    $non_featured = new WP_Query(array(
        "post_type"      => "news",
        "posts_per_page" => 3,  // only 3 latest
        "orderby"        => "date",
        "order"          => "DESC", // newest first
        "meta_query"     => array(
            array(
                "key"     => "featured_news",
                "value"   => '1',
                "compare" => "!="
            )
        )
    ));

    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    $all_news = new WP_Query(array(
        "post_type"      => "news",
        "posts_per_page" => 12, // change per-page limit
        "paged"          => $paged,
    ));
?>

<div class="with-filters pt-[150px]">
    <div class="custom-container">
        <div class="">
            <div class="w-[100%] flex flex-col justify-center items-center h-[100%]">
                <h2 class="text-[42px] font-[700] text-[#1F773A]">Our Latest News</h2>
                <p class="text-[24px] text-[#000000]">Lorem ipsum dolor sit amet consectetur.</p>
            </div>
            <div class="flex justify-center gap-[5px] w-[90%] lg:w-[80%] xl:w-[800px] mx-auto pt-[20px]">
                <div class="relative flex items-center w-[100%] justify-end">
                    <svg id="searchBtn" class="absolute left-[10px]" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.8477 21.75C6.19766 21.75 1.59766 17.15 1.59766 11.5C1.59766 5.85 6.19766 1.25 11.8477 1.25C17.4977 1.25 22.0977 5.85 22.0977 11.5C22.0977 17.15 17.4977 21.75 11.8477 21.75ZM11.8477 2.75C7.01766 2.75 3.09766 6.68 3.09766 11.5C3.09766 16.32 7.01766 20.25 11.8477 20.25C16.6777 20.25 20.5977 16.32 20.5977 11.5C20.5977 6.68 16.6777 2.75 11.8477 2.75Z" fill="#444242"/>
                        <path d="M22.3471 22.7499C22.1571 22.7499 21.9671 22.6799 21.8171 22.5299L19.8171 20.5299C19.5271 20.2399 19.5271 19.7599 19.8171 19.4699C20.1071 19.1799 20.5871 19.1799 20.8771 19.4699L22.8771 21.4699C23.1671 21.7599 23.1671 22.2399 22.8771 22.5299C22.7271 22.6799 22.5371 22.7499 22.3471 22.7499Z" fill="#444242"/>
                    </svg>
                    <input id="news-event-search-input" class="pl-[40px] py-[10px] pr-[10px] text-[#000000] w-[100%] border-[1px] border-[#007831] rounded-l-full rounded-r-sm" type="text" placeholder="Search">
                </div>
                <div id="openFilter" class="cursor-pointer flex items-center gap-[10px] px-[15px] py-[5px] border-[1px] border-[#1F773A] rounded-r-full rounded-l-sm w-fit">
                    <svg width="20" height="15" viewBox="0 0 25 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1.5 5.00003H5.625C5.8453 5.86045 6.3457 6.62307 7.04731 7.16767C7.74892 7.71227 8.61183 8.00787 9.5 8.00787C10.3882 8.00787 11.2511 7.71227 11.9527 7.16767C12.6543 6.62307 13.1547 5.86045 13.375 5.00003H23.5C23.7652 5.00003 24.0196 4.89467 24.2071 4.70714C24.3946 4.5196 24.5 4.26525 24.5 4.00003C24.5 3.73481 24.3946 3.48046 24.2071 3.29292C24.0196 3.10539 23.7652 3.00003 23.5 3.00003H13.375C13.1547 2.13962 12.6543 1.37699 11.9527 0.832391C11.2511 0.28779 10.3882 -0.0078125 9.5 -0.0078125C8.61183 -0.0078125 7.74892 0.28779 7.04731 0.832391C6.3457 1.37699 5.8453 2.13962 5.625 3.00003H1.5C1.23478 3.00003 0.98043 3.10539 0.792893 3.29292C0.605357 3.48046 0.5 3.73481 0.5 4.00003C0.5 4.26525 0.605357 4.5196 0.792893 4.70714C0.98043 4.89467 1.23478 5.00003 1.5 5.00003ZM9.5 2.00003C9.89556 2.00003 10.2822 2.11733 10.6111 2.33709C10.94 2.55685 11.1964 2.86921 11.3478 3.23466C11.4991 3.60012 11.5387 4.00225 11.4616 4.39021C11.3844 4.77817 11.1939 5.13454 10.9142 5.41424C10.6345 5.69395 10.2781 5.88443 9.89018 5.9616C9.50222 6.03877 9.10009 5.99917 8.73463 5.84779C8.36918 5.69641 8.05682 5.44007 7.83706 5.11117C7.6173 4.78227 7.5 4.39559 7.5 4.00003C7.5 3.4696 7.71071 2.96089 8.08579 2.58582C8.46086 2.21075 8.96957 2.00003 9.5 2.00003ZM23.5 15H21.375C21.1547 14.1396 20.6543 13.377 19.9527 12.8324C19.2511 12.2878 18.3882 11.9922 17.5 11.9922C16.6118 11.9922 15.7489 12.2878 15.0473 12.8324C14.3457 13.377 13.8453 14.1396 13.625 15H1.5C1.23478 15 0.98043 15.1054 0.792893 15.2929C0.605357 15.4805 0.5 15.7348 0.5 16C0.5 16.2652 0.605357 16.5196 0.792893 16.7071C0.98043 16.8947 1.23478 17 1.5 17H13.625C13.8453 17.8604 14.3457 18.6231 15.0473 19.1677C15.7489 19.7123 16.6118 20.0079 17.5 20.0079C18.3882 20.0079 19.2511 19.7123 19.9527 19.1677C20.6543 18.6231 21.1547 17.8604 21.375 17H23.5C23.7652 17 24.0196 16.8947 24.2071 16.7071C24.3946 16.5196 24.5 16.2652 24.5 16C24.5 15.7348 24.3946 15.4805 24.2071 15.2929C24.0196 15.1054 23.7652 15 23.5 15ZM17.5 18C17.1044 18 16.7178 17.8827 16.3889 17.663C16.06 17.4432 15.8036 17.1308 15.6522 16.7654C15.5009 16.3999 15.4613 15.9978 15.5384 15.6098C15.6156 15.2219 15.8061 14.8655 16.0858 14.5858C16.3655 14.3061 16.7219 14.1156 17.1098 14.0385C17.4978 13.9613 17.8999 14.0009 18.2654 14.1523C18.6308 14.3036 18.9432 14.56 19.1629 14.8889C19.3827 15.2178 19.5 15.6045 19.5 16C19.5 16.5305 19.2893 17.0392 18.9142 17.4142C18.5391 17.7893 18.0304 18 17.5 18Z" fill="#007831"/>
                    </svg>
                    <p class="text-[18px] text-[#1F773A]">Filter</p>
                </div>
            </div>
            <div id="search-results"></div>
        </div>
        
        <?php include locate_template('news-page/latest-news-section.php'); ?>
        <?php include locate_template('news-page/all-news-section.php'); ?>
        <?php get_template_part('template_part/filter-sidebar'); ?>
    </div>
</div>
